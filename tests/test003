#!/usr/bin/env bash

# Environment
BUILDDIR="$(pwd)"
TMPDIR=$(mktemp -d)
pushd ${TMPDIR}

# Test - uninstall
sudo "${BUILDDIR}/sget" install https://github.com/d99kris/sget
which sget > /dev/null
if [[ "${?}" != "0" ]]; then
  echo "not able to install software in default prefix"
  exit 1
fi

sudo "${BUILDDIR}/sget" remove https://github.com/d99kris/sget
which sget > /dev/null
if [[ "${?}" != "1" ]]; then
  echo "not able to uninstall software in default prefix"
  exit 1
fi

# Cleanup
popd
rm -rf ${TMPDIR}
exit 0
